import{s as Y,f as E,a as b,l as A,g as k,h as I,c as y,m as N,d as h,j as T,i as m,x as _,n as O,L as P,o as B,M as C,y as D}from"./scheduler.405fa0d9.js";import{S as G,i as q}from"./index.95682a25.js";import{y as H}from"./signInWithWebAuthn.5107718c.js";function g(d){let e,n,l="Sign in",o,i;return{c(){e=E("div"),n=E("button"),n.textContent=l,this.h()},l(u){e=k(u,"DIV",{class:!0});var p=I(e);n=k(p,"BUTTON",{class:!0,"data-svelte-h":!0}),C(n)!=="svelte-10ld2a9"&&(n.textContent=l),p.forEach(h),this.h()},h(){T(n,"class","btn variant-filled-primary"),T(e,"class","mb-10")},m(u,p){m(u,e,p),_(e,n),o||(i=D(n,"click",d[2]),o=!0)},p:P,d(u){u&&h(e),o=!1,i()}}}function K(d){let e,n="Get Session",l,o,i,u,p=d[0].passkey.pkpEthAddress+"",f,r,a;return{c(){e=E("button"),e.textContent=n,l=E("br"),o=b(),i=E("p"),u=A("Passkey: "),f=A(p),this.h()},l(t){e=k(t,"BUTTON",{class:!0,"data-svelte-h":!0}),C(e)!=="svelte-1frq73l"&&(e.textContent=n),l=k(t,"BR",{}),o=y(t),i=k(t,"P",{});var s=I(i);u=N(s,"Passkey: "),f=N(s,p),s.forEach(h),this.h()},h(){T(e,"class","btn variant-filled-primary")},m(t,s){m(t,e,s),m(t,l,s),m(t,o,s),m(t,i,s),_(i,u),_(i,f),r||(a=D(e,"click",d[2]),r=!0)},p(t,s){s&1&&p!==(p=t[0].passkey.pkpEthAddress+"")&&O(f,p)},d(t){t&&(h(e),h(l),h(o),h(i)),r=!1,a()}}}function U(d){let e,n="Get Session",l,o,i,u,p=d[0].passkey.pkpEthAddress+"",f,r,a,t="Session: true",s,v;return{c(){e=E("button"),e.textContent=n,l=E("br"),o=b(),i=E("p"),u=A("Passkey: "),f=A(p),r=b(),a=E("p"),a.textContent=t,this.h()},l(c){e=k(c,"BUTTON",{class:!0,"data-svelte-h":!0}),C(e)!=="svelte-1frq73l"&&(e.textContent=n),l=k(c,"BR",{}),o=y(c),i=k(c,"P",{});var S=I(i);u=N(S,"Passkey: "),f=N(S,p),S.forEach(h),r=y(c),a=k(c,"P",{"data-svelte-h":!0}),C(a)!=="svelte-16db6lm"&&(a.textContent=t),this.h()},h(){T(e,"class","btn variant-filled-primary")},m(c,S){m(c,e,S),m(c,l,S),m(c,o,S),m(c,i,S),_(i,u),_(i,f),m(c,r,S),m(c,a,S),s||(v=D(e,"click",d[2]),s=!0)},p(c,S){S&1&&p!==(p=c[0].passkey.pkpEthAddress+"")&&O(f,p)},d(c){c&&(h(e),h(l),h(o),h(i),h(r),h(a)),s=!1,v()}}}function V(d){let e,n,l,o,i,u,p,f=d[1]==="NOTAUTHENTICATED"&&g(d),r=d[1]==="PASSKEYSIGNEDIN"&&K(d),a=d[1]==="PASSKEYSESSION"&&U(d);return{c(){e=E("div"),f&&f.c(),n=b(),r&&r.c(),l=b(),a&&a.c(),o=b(),i=E("div"),u=A("AuthState: "),p=A(d[1]),this.h()},l(t){e=k(t,"DIV",{class:!0});var s=I(e);f&&f.l(s),n=y(s),r&&r.l(s),l=y(s),a&&a.l(s),o=y(s),i=k(s,"DIV",{});var v=I(i);u=N(v,"AuthState: "),p=N(v,d[1]),v.forEach(h),s.forEach(h),this.h()},h(){T(e,"class","p-4")},m(t,s){m(t,e,s),f&&f.m(e,null),_(e,n),r&&r.m(e,null),_(e,l),a&&a.m(e,null),_(e,o),_(e,i),_(i,u),_(i,p)},p(t,[s]){t[1]==="NOTAUTHENTICATED"?f?f.p(t,s):(f=g(t),f.c(),f.m(e,n)):f&&(f.d(1),f=null),t[1]==="PASSKEYSIGNEDIN"?r?r.p(t,s):(r=K(t),r.c(),r.m(e,l)):r&&(r.d(1),r=null),t[1]==="PASSKEYSESSION"?a?a.p(t,s):(a=U(t),a.c(),a.m(e,o)):a&&(a.d(1),a=null),s&2&&O(p,t[1])},i:P,o:P,d(t){t&&h(e),f&&f.d(),r&&r.d(),a&&a.d()}}}function W(d,e,n){let l="",o="";B(async()=>{n(0,l=JSON.parse(localStorage.getItem("me"))),l&&l.passkey&&l.passkey.pkpEthAddress&&l.passkey.sessonSigs==null?n(1,o="PASSKEYSIGNEDIN"):l&&l.passkey&&l.passkey.sessionSigs!=null?n(1,o="PASSKEYSESSION"):n(1,o="NOTAUTHENTICATED")});async function i(){try{n(1,o=await H()),n(0,l=JSON.parse(localStorage.getItem("me")))}catch(u){console.error("Error during sign-in:",u)}}return[l,o,i]}class R extends G{constructor(e){super(),q(this,e,W,V,Y,{})}}export{R as default};
