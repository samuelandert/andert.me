import{s as X,D as Z,f as w,a as L,g as M,c as A,h as N,d as c,a9 as C,j as R,i as E,ai as F,x as v,y as P,L as q,G,aj as H,l as j,m as V,n as U,e as J,K as $}from"./scheduler.df63c2e8.js";import{e as K,u as x,d as ee}from"./each.34398241.js";import{g as le}from"./spread.8a54911c.js";import{S as te,i as ae}from"./index.8a30a216.js";function Y(n,e,i){const r=n.slice();return r[19]=e[i],r[21]=i,r}function z(n){let e,i=(n[0].length>1?Math.abs((n[0][0].fullDate.getTime()-n[0][1].fullDate.getTime())/864e5):0)+"",r,s,d=n[0].length>1&&Math.abs((n[0][0].fullDate.getTime()-n[0][1].fullDate.getTime())/(1e3*60*60*24))>1?"s":"",_,t,o,h,k,D=n[0].map(W).join(" to ")+"",b;return{c(){e=w("div"),r=j(i),s=j(" Night"),_=j(d),t=w("br"),o=L(),h=w("span"),k=j("from "),b=j(D),this.h()},l(f){e=M(f,"DIV",{class:!0});var a=N(e);r=V(a,i),s=V(a," Night"),_=V(a,d),t=M(a,"BR",{}),o=A(a),h=M(a,"SPAN",{class:!0});var y=N(h);k=V(y,"from "),b=V(y,D),y.forEach(c),a.forEach(c),this.h()},h(){R(h,"class","text-xxs lg:text-xs font-normal"),R(e,"class","w-full text-center bg-secondary-500 text-white text-md lg:text-xl font-semibold my-2 rounded-lg p-1 lg:p-2")},m(f,a){E(f,e,a),v(e,r),v(e,s),v(e,_),v(e,t),v(e,o),v(e,h),v(h,k),v(h,b)},p(f,a){a&1&&i!==(i=(f[0].length>1?Math.abs((f[0][0].fullDate.getTime()-f[0][1].fullDate.getTime())/(1e3*60*60*24)):0)+"")&&U(r,i),a&1&&d!==(d=f[0].length>1&&Math.abs((f[0][0].fullDate.getTime()-f[0][1].fullDate.getTime())/(1e3*60*60*24))>1?"s":"")&&U(_,d),a&1&&D!==(D=f[0].map(W).join(" to ")+"")&&U(b,D)},d(f){f&&c(e)}}}function ne(n){let e,i=n[19].month+"",r;return{c(){e=w("div"),r=j(i),this.h()},l(s){e=M(s,"DIV",{class:!0});var d=N(e);r=V(d,i),d.forEach(c),this.h()},h(){R(e,"class","p-4 h-12 md:h-16 rounded-xl bg-secondary-400 text-white flex items-center justify-center")},m(s,d){E(s,e,d),v(e,r)},p:q,d(s){s&&c(e)}}}function Q(n,e){let i,r,s,d,_=e[19].date+"",t,o,h,k=e[19].day+"",D,b,f,a,y,T=(e[21]===0||e[5][e[21]-1].month!==e[19].month)&&ne(e);function l(){return e[15](e[19])}function g(){return e[16](e[19])}return{key:n,first:null,c(){i=J(),T&&T.c(),r=L(),s=w("div"),d=w("div"),t=j(_),o=L(),h=w("div"),D=j(k),b=L(),this.h()},l(m){i=J(),T&&T.l(m),r=A(m),s=M(m,"DIV",{class:!0});var p=N(s);d=M(p,"DIV",{});var O=N(d);t=V(O,_),O.forEach(c),o=A(p),h=M(p,"DIV",{class:!0});var u=N(h);D=V(u,k),u.forEach(c),b=A(p),p.forEach(c),this.h()},h(){R(h,"class","text-xxs"),R(s,"class",f=`flex flex-col h-12 md:h-16 items-center justify-center rounded-xl ${e[19].isBooked?"bg-secondary-100":""} ${e[0].includes(e[19])?"bg-primary-400":""} ${e[0].length===1&&e[10](e[19])?"bg-secondary-100":e[0].length===2&&e[2]&&e[1].includes(e[19])&&e[19]===e[2]?"bg-error-400":e[0].length===2&&!e[1].includes(e[19])?"bg-secondary-100":e[0].length===2&&e[1].includes(e[19])||e[0].length===1&&e[1].includes(e[19])?"bg-primary-400":"hover:bg-primary-500 cursor-pointer"}`),this.first=i},m(m,p){E(m,i,p),T&&T.m(m,p),E(m,r,p),E(m,s,p),v(s,d),v(d,t),v(s,o),v(s,h),v(h,D),v(s,b),a||(y=[P(s,"click",l),P(s,"mouseover",g),P(s,"mouseout",e[17])],a=!0)},p(m,p){e=m,(e[21]===0||e[5][e[21]-1].month!==e[19].month)&&T.p(e,p),p&7&&f!==(f=`flex flex-col h-12 md:h-16 items-center justify-center rounded-xl ${e[19].isBooked?"bg-secondary-100":""} ${e[0].includes(e[19])?"bg-primary-400":""} ${e[0].length===1&&e[10](e[19])?"bg-secondary-100":e[0].length===2&&e[2]&&e[1].includes(e[19])&&e[19]===e[2]?"bg-error-400":e[0].length===2&&!e[1].includes(e[19])?"bg-secondary-100":e[0].length===2&&e[1].includes(e[19])||e[0].length===1&&e[1].includes(e[19])?"bg-primary-400":"hover:bg-primary-500 cursor-pointer"}`)&&R(s,"class",f)},d(m){m&&(c(i),c(r),c(s)),T&&T.d(m),a=!1,$(y)}}}function ie(n){let e,i,r,s,d,_,t,o=[],h=new Map,k,D,b=[{type:"hidden"},{name:i=n[8].name},{"aria-invalid":r=n[4][n[8].name]?"true":void 0},n[9][n[8].name]],f={};for(let l=0;l<b.length;l+=1)f=Z(f,b[l]);let a=n[0].length>0&&z(n),y=K(n[5]);const T=l=>l[19].fullDate;for(let l=0;l<y.length;l+=1){let g=Y(n,y,l),m=T(g);h.set(m,o[l]=Q(m,g))}return{c(){e=w("input"),s=L(),a&&a.c(),d=L(),_=w("div"),t=w("div");for(let l=0;l<o.length;l+=1)o[l].c();this.h()},l(l){e=M(l,"INPUT",{type:!0,name:!0,"aria-invalid":!0}),s=A(l),a&&a.l(l),d=A(l),_=M(l,"DIV",{class:!0});var g=N(_);t=M(g,"DIV",{class:!0});var m=N(t);for(let p=0;p<o.length;p+=1)o[p].l(m);m.forEach(c),g.forEach(c),this.h()},h(){C(e,f),R(t,"class","grid grid-cols-5 sm:grid-cols-8 md:grid-cols-12 lg:grid-cols-16 gap-2 w-full mr-1"),R(_,"class","flex flex-wrap max-h-72 w-full md:max-h-96 overflow-y-auto")},m(l,g){E(l,e,g),e.autofocus&&e.focus(),F(e,n[3][n[8].name]),E(l,s,g),a&&a.m(l,g),E(l,d,g),E(l,_,g),v(_,t);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(t,null);k||(D=P(e,"input",n[14]),k=!0)},p(l,[g]){C(e,f=le(b,[{type:"hidden"},{name:i},g&16&&r!==(r=l[4][l[8].name]?"true":void 0)&&{"aria-invalid":r},l[9][l[8].name]])),g&264&&F(e,l[3][l[8].name]),l[0].length>0?a?a.p(l,g):(a=z(l),a.c(),a.m(d.parentNode,d)):a&&(a.d(1),a=null),g&7207&&(y=K(l[5]),o=x(o,g,T,1,l,y,h,t,ee,Q,null,Y))},i:q,o:q,d(l){l&&(c(e),c(s),c(d),c(_)),a&&a.d(l);for(let g=0;g<o.length;g+=1)o[g].d();k=!1,D()}}}const W=n=>n.fullDate.toLocaleDateString();function se(n,e,i){let r,s;const d=new Date;let _=Array.from({length:180},(u,B)=>{const I=new Date(d.getFullYear(),d.getMonth(),d.getDate()+B),S=Math.random()<.4;return{date:I.getDate(),day:S?"booked":I.toLocaleString("default",{weekday:"short"}),month:I.toLocaleString("default",{month:"short"}),fullDate:I,isBooked:S}}),t=[],o=[],h=null,{childInput:k}=e;const{form:D,errors:b,field:f,constraints:a}=k;G(n,D,u=>i(3,r=u)),G(n,b,u=>i(4,s=u));function y(u){if(t.length===1){const B=[..._].reverse().find(S=>S.isBooked&&S.fullDate.getTime()<t[0].fullDate.getTime()),I=_.find(S=>S.isBooked&&S.fullDate.getTime()>t[0].fullDate.getTime());return B&&u.fullDate.getTime()<B.fullDate.getTime()||I&&u.fullDate.getTime()>I.fullDate.getTime()}return!1}function T(){if(t.length===2){const u=Math.min(t[0].fullDate.getTime(),t[1].fullDate.getTime()),B=Math.max(t[0].fullDate.getTime(),t[1].fullDate.getTime());i(1,o=_.filter(I=>I.fullDate.getTime()>=u&&I.fullDate.getTime()<=B))}else i(1,o=[])}function l(){if(t.length===1&&h){const u=Math.min(t[0].fullDate.getTime(),h.fullDate.getTime()),B=Math.max(t[0].fullDate.getTime(),h.fullDate.getTime());i(1,o=_.filter(I=>I.fullDate.getTime()>=u&&I.fullDate.getTime()<=B))}else t.length===2&&h?i(1,o=_.filter(u=>o.includes(u))):i(1,o=[])}function g(){r[f.name]=this.value,D.set(r)}const m=u=>{!u.isBooked&&!y(u)&&(t.indexOf(u)!==-1||t.length===2&&o.includes(u)?(i(0,t=[]),i(1,o=[])):t.length<2&&i(0,t=[...t,u]),T())},p=u=>{(t.length===1&&!u.isBooked&&!y(u)||t.length===2)&&(i(2,h=u),l())},O=()=>{t.length===1&&(i(2,h=null),i(1,o=[]))};return n.$$set=u=>{"childInput"in u&&i(13,k=u.childInput)},n.$$.update=()=>{n.$$.dirty&1&&(t.length===2?H(D,r[f.name]=JSON.stringify({start:t[0].fullDate,end:t[1].fullDate}),r):H(D,r[f.name]="",r))},[t,o,h,r,s,_,D,b,f,a,y,T,l,k,g,m,p,O]}class de extends te{constructor(e){super(),ae(this,e,se,ie,X,{childInput:13})}}export{de as default};
